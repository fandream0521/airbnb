# 项目搭建

## 

1. 通过 **脚手架(create-react-app)** 创建

2. 对生成的项目结构进行精简，去除不需要的部分

3. 创建项目目录结构

   ![image-20251122171403451](.\img\image-20251122171403451.png)

4. 将项目使用git进行管理

5. 安装craco, 创建**craco.config.js**对项目配置进行修改，比如配置别名、配置less

   ```shell
   npm i @craco/craco
   npm i craco-less -D
   ```

   ```javascript
   const path = require('path');
   const CracoLessPlugin = require('craco-less');
   
   const pathResolve = pathname => path.resolve(__dirname, pathname);
   module.exports = {
   
     // webpack
     webpack: {
       alias: {
         "@": pathResolve("src"),
         "components": pathResolve("src/components"),
         "utils": pathResolve("src/utils")
       }
     },
     // less
     plugins: [
       {
         plugin: CracoLessPlugin
       }
     ]
   }
   ```

   

6. 重置样式： normalize.css/reset.css

   ```
   npm i normalize.css
   ```

7. 安装并配置路由

   ```
   // npm i react-router-dom@6
   // index.js  添加 BrowserRouter
   <BrowserRouter future={{"v7_relativeSplatPath": false, "v7_startTransition": false}}>
     <App />
   </BrowserRouter>
   
   // src/store/index.js  添加routes
   import { lazy } from "react"
   import { Navigate } from "react-router-dom"
   
   const Home = lazy(() => import("@/views/home/Home"));
   const Detail = lazy(() => import("@/views/detail/Detail"));
   const Entire = lazy(() => import("@/views/entire/Entire"));
   
   const routes = [
     {
       path: "",
       element: <Navigate to="home" />
     },
     {
       path: 'home',
       element: <Home />
     },
     {
       path: 'detail',
       element: <Detail />
     },
     {
       path: 'entire',
       element: <Entire />
     }
   ]
   
   
   export {
     routes
   }
   
   // src/App.jsx 创建路由对象
   import { useRoutes } from "react-router-dom";
   import { routes } from "./router";
   
   function App() {
     return (
       <div className="app">
         <header className="head">
           header
         </header>
         <main className="content">
           {useRoutes(routes)}
         </main>
         <footer className="foot">
           footer
         </footer>
       </div>
     );
   }
   
   export default App;
   
   ```

8. 配置状态管理

   ```
   // npm i @reduxjs/toolkit react-redux
   // src/index.js 提供store
   import React from 'react';
   import ReactDOM from 'react-dom/client';
   import App from '@/App';
   
   import "@/assets/css/index.less"
   import { BrowserRouter } from 'react-router-dom';
   import { Provider } from 'react-redux';
   import store from './store';
   
   const root = ReactDOM.createRoot(document.getElementById('root'));
   root.render(
     <React.StrictMode>
       <Provider store={store}>
         <BrowserRouter future={{"v7_relativeSplatPath": false, "v7_startTransition": false}}>
           <App />
         </BrowserRouter>
       </Provider>
     </React.StrictMode>
   );
   
   // src/store/index.js  配置store
   import { configureStore } from "@reduxjs/toolkit";
   import counterReducer from "./modules/counter"
   
   const store = configureStore({
     reducer: {
       counter: counterReducer
     }
   })
   
   export default store;
   
   // src/store/modules/counter.js  创建slice：包括actions和reducer
   import { createSlice } from "@reduxjs/toolkit";
   
   
   const counterSlice = createSlice({
     name: 'counter',
     initialState: {
       value: 0
     },
     reducers: {
       incrementCount(state) {
         state.value += 1
       },
       decrementCount(state) {
         state.value -= 1
       },
       changeCountBy(state, action) {
         state.value += action.payload
       }
     }
   })
   
   
   export const { incrementCount, decrementCount, changeCountBy } = counterSlice.actions;
   
   export default counterSlice.reducer;
   ```

9. 网络请求的封装

   ```
   // npm i axios
   // src/services/request/config.js
   export const BASE_URL = 'http://xxxxxx/airbnb/api';
   export const TIME_OUT = 4500;
   
   // src/services/request/index.js
   import axios from "axios";
   import { BASE_URL, TIME_OUT } from "./config";
   
   class AirRequest {
     constructor(baseURL = BASE_URL, timeout = TIME_OUT) {
       this.instance = axios.create({
         baseURL,
         timeout
       })
   
       this.instance.interceptors.response.use((res) => {
         return res.data;
       }, err => {
         throw err;
       })
     }
   
   
     request(config) {
       return this.instance.request(config);
     }
   
     get(config) {
       return this.request({...config, method: 'GET'})
     }
   
     post(config) {
       return this.request({...config, method: 'POST'})
     }
   }
   
   const request = new AirRequest();
   
   
   export default request
   ```

   